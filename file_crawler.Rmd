---
title: "file_crawler"
author: "Manogna"
date: "2024-09-04"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


```{r}
#load libraries

library(tidyverse)
library(haven)
library(tools)

#get_data

start_path = "../data/raw_data/20200430/"

#data info: mtime = modified time = will let us know if it's been processed or not
all_files <- list.files(start_path, full.names = TRUE, recursive = TRUE)

#create inventory w/ modified time and file path information
file_inventory <- data.frame()

for (file in all_files){ 
  
  file_infor <- file.info(file)
  
  file_infor$file_path <- file
  
  
  file_inventory <- rbind(file_inventory, file_infor)
  
}

#create inventory w/ exact type of file

file_inventory_type <- data.frame()

for (file in all_files){ 
  
  file_type <- file_ext(file)
  
  temp_df <- data.frame(file_path = file, file_type = file_type, stringsAsFactors = FALSE)

  file_inventory_type <- rbind(file_inventory_type, temp_df)
  
}

file_inventory <-  file_inventory %>%
  mutate(file_size = ifelse(size > 100000000, "greater than 1 GB", "less than 1GB"))

file_inventory_updated <- file_inventory %>%
    select('file_path', 'mtime', 'file_size') %>%
    mutate(file_type = file_inventory_type[ , 'file_type']) %>%
    mutate(file_name = basename(file_path),
           folder_path = dirname(file_path),
           folder_name = basename(folder_path)) %>%
    select('folder_name','file_name', 'mtime','file_type', 'file_size')

```





